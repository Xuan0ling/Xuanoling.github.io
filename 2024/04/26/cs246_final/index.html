<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>CS246 | xuan's blog</title><meta name="author" content="xuan pan"><meta name="copyright" content="xuan pan"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="final">
<meta property="og:type" content="article">
<meta property="og:title" content="CS246">
<meta property="og:url" content="http://xuan0ling.github.io/2024/04/26/cs246_final/index.html">
<meta property="og:site_name" content="xuan&#39;s blog">
<meta property="og:description" content="final">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://images3.alphacoders.com/129/1298880.png">
<meta property="article:published_time" content="2024-04-26T19:05:00.000Z">
<meta property="article:modified_time" content="2024-08-10T15:15:58.070Z">
<meta property="article:author" content="xuan pan">
<meta property="article:tag" content="xuan000">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://images3.alphacoders.com/129/1298880.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://xuan0ling.github.io/2024/04/26/cs246_final/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":50,"languages":{"author":"Author: xuan pan","link":"Link: ","source":"Source: xuan's blog","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'CS246',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-08-10 10:15:58'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/./img/pf.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fa-solid fa-image"></i><span> Gallery</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://images3.alphacoders.com/129/1298880.png')"><nav id="nav"><span id="blog-info"><a href="/" title="xuan's blog"><span class="site-name">xuan's blog</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fa-solid fa-image"></i><span> Gallery</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">CS246</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-04-26T19:05:00.000Z" title="Created 2024-04-26 14:05:00">2024-04-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-08-10T15:15:58.070Z" title="Updated 2024-08-10 10:15:58">2024-08-10</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="CS246"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="CS246-Final-Reveiw"><a href="#CS246-Final-Reveiw" class="headerlink" title="CS246 Final Reveiw"></a>CS246 Final Reveiw</h1><h2 id="Design-Patterns"><a href="#Design-Patterns" class="headerlink" title="Design Patterns"></a>Design Patterns</h2><ul>
<li>Non-trivial Programming patterns that appear often in object oriented programs.<br>Well thought-out solutions that work out in multiple situations.</li>
</ul>
<h3 id="Iterator-Pattern"><a href="#Iterator-Pattern" class="headerlink" title="Iterator Pattern"></a>Iterator Pattern</h3><ul>
<li>Since all Iterators have similar implmentation, we can can simplify Iterators even further, by making an Abstruct Iterator class, and inheriting from it to make more Iterators.</li>
</ul>
<p>Example: Abstruct Iterator class:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">AbstructIterator</span> &#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="keyword">virtual</span> <span class="type">int</span> <span class="keyword">operator</span>*() <span class="type">const</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">virtual</span> AbstracIterator&amp; <span class="keyword">operator</span>++() = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">virtual</span> <span class="type">bool</span> <span class="keyword">operator</span>!=(<span class="type">const</span> AbstructIterator&amp; other) <span class="type">const</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">virtual</span> ~<span class="built_in">AbstractIterator</span>() &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// we can now inherit from this class to make other iterators</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">List</span> &#123;</span><br><span class="line">    ... <span class="comment">// Fields and methods</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Iterator</span> : <span class="keyword">public</span> AbstructIterator &#123;</span><br><span class="line">        ... <span class="comment">// Implement virtual methods</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Tree</span> &#123;</span><br><span class="line">    ... <span class="comment">// Fields and methods</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Iterator</span> : <span class="keyword">public</span> AbstructIterator &#123;</span><br><span class="line">        ... <span class="comment">// Implement virtual methods</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="Decorator-Pattern"><a href="#Decorator-Pattern" class="headerlink" title="Decorator Pattern"></a>Decorator Pattern</h3><p>These are the four steps for implementing Decorator Design pattern</p>
<ol>
<li>Abstract Base Class normally only has pure virtual methods</li>
<li>Concrete Component Class contains fields and implementation for pure virtual methods, we create the core object from this class</li>
<li>Abstruct Decorator class is derived from abstruct base class, and this needs a field which is a pointer type pointing the object, and a user-defined constructor</li>
<li>Concrete Classses derived from abstruct class contains extra fields (depending on the user), can have as many concrete classes as user wants</li>
</ol>
<ul>
<li>Similar idea as traversing a linked-list data structure</li>
</ul>
<p>Example - Linked List</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// abstruct class</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">Protected:</span><br><span class="line">    <span class="type">int</span> value;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Node</span>(<span class="type">int</span> value) : value&#123;value&#125; &#123; &#125;</span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">Node</span>() &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">print</span><span class="params">()</span> <span class="type">const</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// concrete base class</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LeafNode</span> : <span class="keyword">public</span> Node &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">LeafNode</span>(<span class="type">int</span> value) : Node&#123;value&#125; &#123; &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span> <span class="type">const</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; value &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// concrete component class </span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">InternalNode</span> : <span class="keyword">public</span> Node &#123;</span><br><span class="line">    Node* next;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    InternalNode&#123;<span class="type">int</span> value, Node* next&#125; : Node&#123;value&#125;, next&#123;next&#125; &#123; &#125;</span><br><span class="line">    ~<span class="built_in">InternalNode</span>() &#123; <span class="keyword">delete</span> next; &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span> <span class="type">const</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; value &lt;&lt; std::endl;</span><br><span class="line">        next-&gt;<span class="built_in">print</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Example 2 transcript:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Transcript</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">Transcript</span>() &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">int</span> <span class="title">csCoursesNum</span><span class="params">()</span> <span class="type">const</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">int</span> <span class="title">highestMathGrade</span><span class="params">()</span> <span class="type">const</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Blank</span> : <span class="keyword">public</span> Transcript &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">csCoursesNum</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">highestMathGrade</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Decorator</span> : <span class="keyword">public</span> Transcript &#123;</span><br><span class="line">    Transcript* ts;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Decorator</span>(Transcript* ts) : ts&#123;ts&#125; &#123; &#125;</span><br><span class="line">    ~<span class="built_in">Decorator</span>() &#123; <span class="keyword">delete</span> ts; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Math</span> : <span class="keyword">public</span> Decorator &#123;</span><br><span class="line">    <span class="type">int</span> grade;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Math</span>(<span class="type">int</span> grade) : grade&#123;grade&#125; &#123; &#125;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">csCoursesNum</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ts-&gt;<span class="built_in">csCoursesNum</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">highestMathGrade</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> highest = ts-&gt;<span class="built_in">hightstMathGrade</span>();</span><br><span class="line">        <span class="keyword">return</span> highest &gt;= grade ? highest; : grade;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CS</span> : <span class="keyword">public</span> Decorator &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">CS</span>() &#123; &#125;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">csCoursesNum</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ts-&gt;<span class="built_in">csCoursesNum</span>() + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">highestMathGrade</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ts-&gt;<span class="built_in">hightstMathGrade</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//client Code</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Transcript* ts = <span class="keyword">new</span> <span class="built_in">blank</span>();</span><br><span class="line"></span><br><span class="line">    ts = <span class="keyword">new</span> <span class="built_in">CS</span>(ts);</span><br><span class="line">    ts = <span class="keyword">new</span> <span class="built_in">CS</span>(ts);</span><br><span class="line"></span><br><span class="line">    ts = <span class="keyword">new</span> <span class="built_in">Math</span>(ts, <span class="number">78</span>);</span><br><span class="line">    ts = <span class="keyword">new</span> Math&#123;ts, <span class="number">90</span>&#125;;</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; ts-&gt;<span class="built_in">csCoursesNum</span>() &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; ts-&gt;<span class="built_in">highestMathGrade</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">delete</span> ts;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Example 3 Pizza Ordering App</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// abstruct super class</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Pizza</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">float</span> <span class="title">price</span><span class="params">()</span> <span class="type">const</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> string <span class="title">desc</span><span class="params">()</span> <span class="type">const</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">Pizza</span>() &#123; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// concrete base class</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BlankPizza</span> : <span class="keyword">public</span> Pizza &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">float</span> <span class="title">price</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123; <span class="keyword">return</span> <span class="number">7.99</span>; &#125;</span><br><span class="line">    <span class="function">string <span class="title">desc</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123; <span class="keyword">return</span> <span class="string">&quot;piazza&quot;</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// abstruct decorator class</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Decorator</span> : <span class="keyword">public</span> Pizza &#123;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    Pizza* pizza;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Decorator</span>(Piazza* pizza) : pizza&#123;pizza&#125; &#123; &#125;</span><br><span class="line">    ~<span class="built_in">Decorator</span>() &#123; <span class="keyword">delete</span> pizza; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// concrete component class</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Topping</span> : <span class="keyword">public</span> Decorator &#123;</span><br><span class="line">    string name;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Topping</span>(Piazza* pizza, string name) : Decorator&#123;pizza&#125;, name&#123;name&#125; &#123; &#125;</span><br><span class="line">    <span class="function"><span class="type">float</span> <span class="title">price</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123; <span class="keyword">return</span> pizza-&gt;<span class="built_in">price</span>() + <span class="number">0.99</span>; &#125;</span><br><span class="line">    <span class="function">string <span class="title">desc</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123; <span class="keyword">return</span> pizza-&gt;<span class="built_in">desx</span>() + <span class="string">&quot; with &quot;</span> + name; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">StuffedCrust</span> : <span class="keyword">public</span> Decorator &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">StuffedCrust</span>(Piazza* pizza) : Decorator&#123;pizza&#125; &#123; &#125;</span><br><span class="line">    <span class="function"><span class="type">float</span> <span class="title">price</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123; <span class="keyword">return</span> pizza-&gt;<span class="built_in">price</span>() + <span class="number">1.50</span>; &#125;</span><br><span class="line">    <span class="function">string <span class="title">desc</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123; <span class="keyword">return</span> pizza-&gt;<span class="built_in">desx</span>() + <span class="string">&quot; with stuffed crust&quot;</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// client</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">    Pizza*  p = <span class="keyword">new</span> BlankPizza&#123;&#125;;</span><br><span class="line">    p = <span class="keyword">new</span> Topping&#123;<span class="string">&quot;cheese&quot;</span>, p&#125;;</span><br><span class="line">    p = <span class="keyword">new</span> Topping&#123;<span class="string">&quot;olives&quot;</span>, p&#125;;</span><br><span class="line">    p = <span class="keyword">new</span> stuffedCrust&#123;p&#125;;</span><br><span class="line">    std::cout &lt;&lt; p-&gt;<span class="built_in">price</span>(); &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; p-&gt;<span class="built_in">desc</span>(); &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Observer-Pattern"><a href="#Observer-Pattern" class="headerlink" title="Observer Pattern"></a>Observer Pattern</h3><p>consider the case where we want some class with data to dispatch updates to other objects whenever it’s data changes. For example: graphs in spreadsheets, social media notifications.<br><img src="/image.png" alt="alt text"></p>
<p>This is the steps of execution when the Subject is changed:</p>
<ol>
<li>Concrete Subject is changed</li>
<li>notifyObservers is called (either inside or outside the class)</li>
<li>notify is called for each Observer in the Subject’s list</li>
<li>Each ConcreteObserver can call getState and update accordingly</li>
</ol>
<p>Example: Twitter, or similar social media app</p>
<p>Concrete Subject: Tweeter, publishes tweets to followers<br>Concrete Observer: Follower, reacts to updates to the one Tweeter they follow.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Subject</span> &#123;</span><br><span class="line">    vector&lt;Observer*&gt; observers;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="title">notifyObservers</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span>&amp; it : observers) it-&gt;<span class="built_in">notify</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="title">attach</span><span class="params">(Observer* o)</span> </span>&#123; observers.<span class="built_in">emplace_back</span>(o); &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="title">detach</span><span class="params">(Observer* o)</span> </span>&#123; </span><br><span class="line">        <span class="keyword">auto</span> it = std::<span class="built_in">find</span>(observers.<span class="built_in">begin</span>(), observers.<span class="built_in">end</span>(), o);</span><br><span class="line">        <span class="keyword">if</span> (it != observers.<span class="built_in">end</span>()) observers.<span class="built_in">erase</span>(it);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">Subject</span>() = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line">Subject::~<span class="built_in">Subject</span>() &#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Observer</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">notify</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">observer</span>() &#123; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Tweeter</span> : <span class="keyword">public</span> Subject &#123;</span><br><span class="line">    string lastTweet;</span><br><span class="line">    ifstream file;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Tweeter</span>(<span class="type">const</span> string&amp; filename) : file&#123;filename&#125; &#123; &#125;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">tweet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">getline</span>(file, lastTweet);</span><br><span class="line">        <span class="keyword">return</span> file.<span class="built_in">good</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">string <span class="title">getState</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123; <span class="keyword">return</span> lastTweet; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Follower</span> : <span class="keyword">public</span> Observer &#123;</span><br><span class="line">    string name;</span><br><span class="line">    Tweeter* iFollow;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Follower</span>(string name, Tweeter* iFollow) : name&#123;name&#125;, iFollow&#123;iFollow&#125; &#123; </span><br><span class="line">        iFollow-&gt;<span class="built_in">attach</span>(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    ~<span class="built_in">Follower</span>() &#123; iFollow-&gt;<span class="built_in">dettach</span>(<span class="keyword">this</span>) &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">notify</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123; </span><br><span class="line">        string tweet = iFollow-&gt;<span class="built_in">getState</span>();</span><br><span class="line">        <span class="keyword">if</span> (tweet.<span class="built_in">find</span>(name) != string::npos) &#123;</span><br><span class="line">            cout &lt;&lt; name &lt;&lt; <span class="string">&quot;says: Yey!&quot;</span> &lt;&lt; endl;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            cout &lt;&lt; name &lt;&lt; <span class="string">&quot;says: Boo!&quot;</span> &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// client</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Tweeter elom&#123;<span class="string">&quot;elom.txt&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">    Follower joe&#123;<span class="string">&quot;joe&quot;</span>, &amp;elom&#125;;</span><br><span class="line">    Follower mary&#123;<span class="string">&quot;mary&quot;</span>, &amp;elom&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(elon.<span class="built_in">tweet</span>()) &#123;</span><br><span class="line">        elon.<span class="built_in">notifyObservers</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Factory-Method-Pattern-Virtual-constructor-pattern"><a href="#Factory-Method-Pattern-Virtual-constructor-pattern" class="headerlink" title="Factory Method Pattern (Virtual constructor pattern)"></a>Factory Method Pattern (Virtual constructor pattern)</h3><p>Example:</p>
<ul>
<li>Suppose we are developing a game, and we will hace goblin and slime as monsters</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// abstruct Monster</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Monster</span> &#123;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="type">const</span> std::string name;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> health;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> damege;</span><br><span class="line">    <span class="comment">// private constructor</span></span><br><span class="line">    <span class="built_in">Monster</span>( <span class="type">const</span> std::string&amp; name, <span class="type">const</span> <span class="type">unsigned</span> <span class="type">int</span> health, <span class="type">const</span> <span class="type">unsigned</span> <span class="type">int</span> damege)</span><br><span class="line">    : name&#123;name&#125;, health&#123;health&#125;, damege&#123;damege&#125; &#123; &#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">Monster</span>() = <span class="number">0</span>;</span><br><span class="line">    firend std::ostream&amp; <span class="keyword">operator</span>&lt;&lt;( std::ostream&amp;, <span class="type">const</span> Monster&amp;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Monster::~<span class="built_in">Monster</span>() &#123; &#125;</span><br><span class="line">std::ostream&amp; <span class="keyword">operator</span>&lt;&lt;( std::ostream&amp; out, <span class="type">const</span> Monster&amp; m) &#123;</span><br><span class="line">    out &lt;&lt; m.name &lt;&lt; <span class="string">&quot; : &quot;</span> &lt;&lt; <span class="string">&quot; health: &quot;</span> &lt;&lt; m.health &lt;&lt; <span class="string">&quot; damege: &quot;</span> &lt;&lt; m.damege;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// concrete classes</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Goblin</span> : <span class="keyword">public</span> Monster &#123;</span><br><span class="line">    <span class="built_in">Goblin</span>( <span class="type">const</span> std::string&amp; name, <span class="type">const</span> <span class="type">unsigned</span> <span class="type">int</span> health, <span class="type">const</span> <span class="type">unsigned</span> <span class="type">int</span> damege)</span><br><span class="line">    : Monster&#123;name, health, damege&#125; &#123; &#125;</span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">class</span> <span class="title class_">LevelOne</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Slime</span> : <span class="keyword">public</span> Monster &#123;</span><br><span class="line">    <span class="built_in">Sile</span>( <span class="type">const</span> std::string&amp; name, <span class="type">const</span> <span class="type">unsigned</span> <span class="type">int</span> health, <span class="type">const</span> <span class="type">unsigned</span> <span class="type">int</span> damege)</span><br><span class="line">    : Monster&#123;name, health, damege&#125; &#123; &#125;</span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">class</span> <span class="title class_">LevelTwo</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// assume we also have class Weapon same with monster</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Factory class</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Factory</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> Monster* <span class="title">createMonster</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> Weapon* <span class="title">createWeapon</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">Factory</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LevelOne</span> : <span class="keyword">public</span> Factory &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">Monster* <span class="title">createMonster</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Goblin</span>(<span class="string">&quot;Goblin&quot;</span>, <span class="number">100</span>, <span class="number">15</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    Weapon* LevelOne : <span class="keyword">public</span> Factory &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Sword&#123;<span class="string">&quot;Sword&quot;</span>, <span class="number">30</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LevelTwo</span> : <span class="keyword">public</span> Factory &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">Monster* <span class="title">createMonster</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Slime</span>(<span class="string">&quot;Slime&quot;</span>, <span class="number">150</span>, <span class="number">20</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    Weapon* LevelOne : <span class="keyword">public</span> Factory &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Sword&#123;<span class="string">&quot;Gun&quot;</span>, <span class="number">50</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    LevelOne l1;</span><br><span class="line">    Monster* m1 = l1.<span class="built_in">createMonster</span>();</span><br><span class="line">    Weapon* w1 = fb.<span class="built_in">createWeapon</span>();</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; *m1 &lt;&lt; w1* &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    LevelTwo l2;</span><br><span class="line">    Monster* m2 = l1.<span class="built_in">createMonster</span>();</span><br><span class="line">    Weapon* w2 = fb.<span class="built_in">createWeapon</span>();</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; *m2 &lt;&lt; *w2 &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">delete</span> m1;</span><br><span class="line">    <span class="keyword">delete</span> w1;</span><br><span class="line">    <span class="keyword">delete</span> m2;</span><br><span class="line">    <span class="keyword">delete</span> w2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Template-Method-Pattern-Non-Virtual-Idiom"><a href="#Template-Method-Pattern-Non-Virtual-Idiom" class="headerlink" title="Template Method Pattern (Non-Virtual Idiom)"></a>Template Method Pattern (Non-Virtual Idiom)</h3><p><img src="/image-1.png" alt="alt text"></p>
<ul>
<li>Behavioral Design Pattern</li>
<li>Defines a sequence of operation in base class</li>
<li>derived classes override the methods without changing the overall structure</li>
<li>Clients cannot access methode without directly</li>
<li>Clients can only call public method which is most likly a sequence of operations that are fully implemented in derived clasees</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TemplateMethod</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">foo</span> <span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">goo</span> <span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">execute</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">foo</span>();</span><br><span class="line">        <span class="built_in">goo</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">TemlateMethod</span>() &#123; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> : <span class="keyword">public</span> TemplateMethod &#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> foo <span class="title">override</span> <span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> foo <span class="title">override</span> <span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The <strong>Template Method Pattern</strong> may be generalized into Non-Virtual Idiom (NVI). The NVI sates the following:</p>
<ol>
<li>Public method should be non-virtual</li>
<li>Virtual methods should be private or protected</li>
<li>Exception: Destructor should be public virtual</li>
</ol>
<p>The main benefit is flexibility:</p>
<ul>
<li>We can add code that will always run when something is excute by putting it before &#x2F; after foo()&#x2F;goo(),</li>
<li>We can also add more “hools” for customization by adding Pribate virtual methods.</li>
</ul>
<p>We do not need to change the public interface for any of these modifications. The code will also remain as fast as before, since the compiler will optimize out the extra function call.</p>
<p>While it is also possible to add new features without using NVI, we would have to track down every location where excute() is called and add the code to each location. Thus, it is easier to use NVI from the strat rather than adding it later.</p>
<h2 id="Advanced-C-Features"><a href="#Advanced-C-Features" class="headerlink" title="Advanced C++ Features"></a>Advanced C++ Features</h2><h3 id="STL-Maps"><a href="#STL-Maps" class="headerlink" title="STL Maps"></a>STL Maps</h3><p>An STL Map is an Array that can be indexed with differen types rather than just an integer. It is found in <map>.</p>
<p>Example: Creating and using STL Map.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">map&lt;string, <span class="type">int</span>&gt; m;</span><br><span class="line">m[<span class="string">&quot;abc&quot;</span>] = <span class="number">2</span>;</span><br><span class="line">m[<span class="string">&quot;def&quot;</span>] = <span class="number">3</span>;</span><br><span class="line">cout &lt;&lt; m[<span class="string">&quot;abc&quot;</span>] &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; m[<span class="string">&quot;ghi&quot;</span>] &lt;&lt; endl;</span><br><span class="line"><span class="comment">// If a key is not found, then the value is default construted (objects) or zero-intalizd (primitives).</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (m.<span class="built_in">count</span>(<span class="string">&quot;abc&quot;</span>)) &#123;...&#125; <span class="comment">// m.count returns 1 is the key is found and 0 otherwise</span></span><br><span class="line">m.<span class="built_in">erase</span>(<span class="string">&quot;abc&quot;</span>); <span class="comment">// removes the provided key and associated value</span></span><br><span class="line"><span class="comment">// If you try to erase a key-value pair in a std::map using a key that does not exist, nothing happens, </span></span><br><span class="line"><span class="comment">// and no error is thrown. The erase function simply does nothing if the key is not found.</span></span><br></pre></td></tr></table></figure>

<p>Iterating through an STL Map:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span>&amp; p : m) &#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;key: &quot;</span> &lt;&lt; p.first &lt;&lt; <span class="string">&quot;, value: &quot;</span> &lt;&lt; p.second &lt;&lt; endl;</span><br><span class="line">    <span class="comment">// p.first is the key and p.second is the value</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>In the above example with two differen fields, each storing a different template type. Here it is a string and an int.</p>
<p>We are using structs here because it is just a collection of data with no invariants to preserve.</p>
<h4 id="Structured-binding"><a href="#Structured-binding" class="headerlink" title="Structured binding"></a>Structured binding</h4><p>Alternatively, we also use a structured bindling:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span>&amp; [key, value] : m) &#123;</span><br><span class="line">    cout &lt;&lt; key &lt;&lt; <span class="string">&quot;, &quot;</span> value &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Structured bindings are used to convert dat stored somewhere, typically in a struct (or class with public fields) or array, into local variables.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vec v&#123;<span class="number">1</span>, <span class="number">2</span>&#125;;</span><br><span class="line"><span class="keyword">auto</span> [localX, localY] = v;</span><br><span class="line"><span class="comment">// localX = 1, localY = 2</span></span><br></pre></td></tr></table></figure>

<p>We can also use structured bindlings for stack-allocated arrays, if the size is known:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> a[<span class="number">3</span>] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line"><span class="keyword">auto</span> [x, y, z] = a;</span><br></pre></td></tr></table></figure>

<h3 id="Coupling-x2F-Cohesion"><a href="#Coupling-x2F-Cohesion" class="headerlink" title="Coupling&#x2F;Cohesion"></a>Coupling&#x2F;Cohesion</h3><p>what should go into a modulo?<br>How to tell if code is well-structred?</p>
<p>So far, we have stored one class in each module. Larger programs contain multiple classes per module.</p>
<p><strong>Coupling:</strong> To what extent do modules depend on each other:</p>
<ul>
<li><strong>Low Copling:</strong> Simple communication via parameters&#x2F;results.</li>
<li>&lt; Communication via arrays or structures.</li>
<li>&lt; Modules affect each others’ control flow.</li>
<li>&lt; Modules share global data.</li>
<li><strong>High Coupling:</strong> Modules have access each other’s implementation (friends).</li>
</ul>
<p><strong>Cohesion:</strong> How much do parts of a mudule relate to each other?</p>
<ul>
<li><strong>Low Chohesion:</strong> Module parts are unrelated (ex <utility>)</li>
<li>&lt; Module parts share a common theme, but otherwise unrelated (ex <algorithm>)</li>
<li>&lt; Module parts cooperatr to manage a lifetime state (ex read&#x2F;open&#x2F;write files)</li>
<li><strong>High Cohesion:</strong> Module parts co-operate to perform one task.</li>
</ul>
<p>We desire low coupling and high cohesion. The combination of both makes the program easy to understand and change.</p>
<p>Example: How to declate 2 classes that depend on each other.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">    b y;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> &#123;</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">    A y;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>We can not determine the size of A or B. Thus, we break the chain of dependencies via a pointer.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>; <span class="comment">// Forward declaration</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">    B* y;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> &#123;</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">    A* y;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>We can not creat forward declarations in a different module to the one where the class is actually declared, and thus A and B need to be in the same module.</p>
<p>Note: Forward declaration is not allowed for object or for inheritence.</p>
<p>Example: Let’s consider applying coupling and cohesion to TiceTacToe.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Board</span> &#123;</span><br><span class="line">    ... <span class="comment">// Private fields and methods</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">paly</span><span class="params">()</span> </span>&#123;.. cout &lt;&lt; <span class="string">&quot;Your Move&quot;</span> &lt;&lt; end;&#125;</span><br><span class="line">    ... <span class="comment">// other public fields and methods</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Here, Board is coupled with cout. We can not reuse Board without getting print statements. What if we wanted to print to a file, or not print anything at all?</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Board</span> &#123;</span><br><span class="line">    istream&amp; in;</span><br><span class="line">    ostrean&amp; out;</span><br><span class="line">    ... <span class="comment">// other private fields and methods</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Board</span>(istrean&amp; in, ostream&amp; out) : in&#123;in&#125;, out&#123;out&#125; &#123; ... &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">play</span><span class="params">()</span> </span>&#123;... out &lt;&lt; <span class="string">&quot;your move&quot;</span> &lt;&lt; endl;&#125;</span><br><span class="line">    ... <span class="comment">// Other public fields and methods</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>While this allows us to cusomize the stream we use, we are still coupled streams.</p>
<p>What if we wanted to use a praphical display or a Web API? </p>
<p>The Board should not communicate with the user.</p>
<h4 id="Single-Responsibility-Principle"><a href="#Single-Responsibility-Principle" class="headerlink" title="Single Responsibility Principle:"></a>Single Responsibility Principle:</h4><p>Each class ashould have exactly one reason to change. </p>
<p>If changes to two different parts of the specification both require changes to the same class, the SRP is violated.</p>
<p>Board State and Communication are both different thing.</p>
<p>We used to use the main function to perform most communication, however is not good style, since the main function is not reusable like other classes are.</p>
<p>Instead, we should split the program into Model, View, and Controller for handing data, output, and input respectively.</p>
<h4 id="Model-View-Controller-MVC"><a href="#Model-View-Controller-MVC" class="headerlink" title="Model View Controller (MVC)"></a>Model View Controller (MVC)</h4><p><strong>Model, View, Controller Architecture:</strong></p>
<ul>
<li>Model: Keeps trach of the data, and the logic surrounding the data. <ul>
<li>Communicates with the Controller via parameters&#x2F;result.<ul>
<li>Sometimes, there is an Observer relationship between the MOdel and View(s).</li>
</ul>
</li>
</ul>
</li>
<li>View: Handles output, and communicarion with the user.</li>
<li>Controller: Manages inout, and control flow between the Model and View.<ul>
<li>May encapsulate logic for rules&#x2F;turn-taking<ul>
<li>Sometimes, input is taken from the View (ex. if it is a Window)</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>The Controller receives input from the user, passes commands to the model, and receives results from it. The controller also communicates with the View to provide information to be displayed, and the View passes control back to the Controller.</p>
<p>The MVC architecture promotes the reuse of code. For example, one Model (like TicTacToe game) could be reused with different Models and controllers(ex CLI game, AI taining, web app, ect)</p>
<h3 id="Exception-Safety"><a href="#Exception-Safety" class="headerlink" title="Exception Safety"></a>Exception Safety</h3><p>Consider the following code, assuming that C is any object:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    C myC&#123;&#125;;</span><br><span class="line">    C *myCptr = <span class="keyword">new</span> C&#123;&#125;;</span><br><span class="line">    <span class="built_in">g</span>();</span><br><span class="line">    <span class="keyword">delete</span> myCptr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>While it might seem like this code is perfect, ther is one edge case. if there was error inside g(), and an exception were to be thrown, then stack unwinding occurs, and f will be removed from the stack since it does not catch any errors. While stack-allocated variables like myC will be freed during stack unwinding (the destructor is called), the heap allocated myCptr will not be freed since it;s destructor is never called.</p>
<p>Consider the above code with the code to free heap variables in case of an error:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    c myC&#123;&#125;;</span><br><span class="line">    C *myCptr = <span class="keyword">new</span> C&#123;&#125;;</span><br><span class="line">    <span class="keyword">try</span> &#123;<span class="built_in">g</span>()&#125;</span><br><span class="line">    <span class="built_in">catch</span> (...) &#123; <span class="keyword">delete</span> myCptr; <span class="keyword">throw</span>; &#125;</span><br><span class="line">    <span class="keyword">delete</span> myCptr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This works, However, it is super clunky. The code delete heap memory is duplicated here, and we would also have to repeat it for every function we call that could throw an exception. Furthermore, the doe we need to at to each catch block would only get more complicated every time we allocate memory from the heap in the function.</p>
<p>We want to make sure that delete runs for all the heap-allocated memory regardless of whether the function terminates normally or due to an exception. Other langueges have a finally clause, which runs regardless of whether an exception waas throws or not. However, C++ dose not have this.</p>
<p>There is a guarantee that the destructor will run for all stack-allocated objects during stack unqinding.</p>
<p>Solution: Wrap dynamically allocated memory in a stack-allocated object.<br>In general, using stack-allocated object is preferred</p>
<h3 id="Reaource-Acquisition-is-Initializtion-RAII"><a href="#Reaource-Acquisition-is-Initializtion-RAII" class="headerlink" title="Reaource Acquisition is Initializtion (RAII)"></a>Reaource Acquisition is Initializtion (RAII)</h3><p>Constructor: Acquires the resource<br>Destructor: Releses the resource</p>
<p>We have already used RAII before. Consider using an ifstream:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Start of some function</span></span><br><span class="line">    ifstream f&#123;<span class="string">&quot;file.txt&quot;</span>&#125;;</span><br><span class="line">    <span class="comment">// end of the function</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Here, the file is accessed in the constructor of the ifstream, and closed in the destructor, which runs when the function that the ifstream is defined in exits.<br>std::unique_ptr<T>, found in <memory> is an RAII class that manages dynamic memory.<br>Constructor: Takes in a T*<br>Destructor: Delets the pointer</p>
<h4 id="unique-pointer"><a href="#unique-pointer" class="headerlink" title="unique pointer"></a>unique pointer</h4><p>Example: Using RAII in a function using unique_ptr.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Once again, let C be any object</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    C myC&#123;&#125;;</span><br><span class="line">    unique_ptr&lt;C&gt; myCptr&#123;<span class="keyword">new</span> c&#123;&#125;&#125;;</span><br><span class="line">    <span class="built_in">g</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Whichever way f exits, the destructor will run on myCptr, and the memory will be freed.</p>
<p>We could also use the std::make_unique function, also found in <Memory>:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    C myC&#123;&#125;;</span><br><span class="line">    <span class="keyword">auto</span> myCptr = <span class="built_in">make_unique</span>&lt;C&gt;();</span><br><span class="line">    <span class="built_in">g</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>make_unique creates a C object in the heap using new and the arguments that are provided to it.</p>
<p>What heppens if we copy a unqiue_ptr?</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> p = make_unique&lt;C&gt;&#123;...&#125;;</span><br><span class="line">unique_ptr&lt;C&gt; q = p; <span class="comment">// Invokes copy ctor for unique_ptr</span></span><br></pre></td></tr></table></figure>

<p>Copying a unqiue_ptr doesn’t make sence since having two different unique_ptr object pointing to the same memory address would cause a double delete. Beecause of this, the copy constructor and copy assignment operators are disabled for unique_ptr.</p>
<p>unique_ptr also has a function called get(), which returns the memory address of the pointer that it contains.</p>
<p>Example: Implementation of unique_ptr</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">class</span> <span class="title class_">unqiue_ptr</span> &#123;</span><br><span class="line">    T* ptr;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// Ctor and dtor</span></span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">unique_ptr</span><span class="params">(Y *ptr)</span>: ptr&#123;</span>ptr&#125; &#123;&#125;</span><br><span class="line">    ~<span class="built_in">unique_ptr</span>() &#123; <span class="keyword">delete</span> ptr; &#125;</span><br><span class="line">    <span class="comment">// Disable copy ctor and assignment operator</span></span><br><span class="line">    <span class="built_in">unique_ptr</span>(<span class="type">const</span> unique_ptr&lt;T&gt;&amp; other) = <span class="keyword">delete</span>;</span><br><span class="line">    unique_ptr&lt;T&gt;&amp; <span class="keyword">operator</span>=(<span class="type">const</span> unique_ptr&lt;T&gt;&amp; other) = <span class="keyword">delete</span>;</span><br><span class="line">    <span class="comment">// Move ctor and assignment operator</span></span><br><span class="line">    <span class="built_in">unique_ptr</span>(<span class="type">const</span> unique_ptr&lt;T&gt;&amp;&amp; other)</span><br><span class="line">     ： ptr&#123;other.ptr&#125; &#123; other.ptr = <span class="literal">nullptr</span>; &#125;</span><br><span class="line">    unique_ptr&lt;T&gt;&amp; <span class="keyword">operator</span>=(<span class="type">const</span> unique_ptr&lt;T&gt;&amp;&amp; other) &#123;</span><br><span class="line">        <span class="keyword">delete</span> ptr;</span><br><span class="line">        ptr = other.ptr;</span><br><span class="line">        other.ptr = <span class="literal">nullptr</span>;</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Functions to get pointer and reference</span></span><br><span class="line">    T&amp; <span class="keyword">operator</span>*() &#123; <span class="keyword">return</span> *ptr; &#125;</span><br><span class="line">    <span class="function">T* <span class="title">get</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> ptr; &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>If we need to copy a pointer, that should we do?<br>We first need to ask, “Who is in charge of ownership?”</p>
<ul>
<li>Whoever owns the memory gets the unique_ptr</li>
<li>Everyone who just uses the memory can access it via raw pointers. We can use p.get() for this.</li>
</ul>
<p>Our new understanding of ownership can be signalled via type.</p>
<ul>
<li>unique+ptr - Represents ownership. Associated memory s deleted when it goes out of scope.</li>
<li>Raw pointer - Represent non-ownership. The default is that they do not free memory when they go out of scope.</li>
<li>Moving unique_ptr - Transfer of ownership.</li>
</ul>
<p>Parameters:</p>
<ul>
<li>void f(unique_ptr<C> p) : f takes ownership of the unique_ptr, which is deleted when f finishes running.</li>
<li>void g(*p) : Ownership is not transferred from the caller to g, g should just use p, and not delet it.</li>
</ul>
<p>Result:</p>
<ul>
<li>unique_ptr<C> f() : return alwaystransfer ownership. The pointer is now owned by caller.</li>
<li>C *g() : call shouldn’t delete the returned value. It is either stack memory or owned by someone else.</li>
</ul>
<h4 id="shared-pointer"><a href="#shared-pointer" class="headerlink" title="shared pointer"></a>shared pointer</h4><p>Example: Using std::shared_pointer</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="keyword">auto</span> p = make_shared&lt;C&gt;&#123;...&#125;;</span><br><span class="line">    <span class="keyword">if</span>(...) &#123;</span><br><span class="line">        <span class="keyword">auto</span> q = p;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Once the <code>if</code> statement finishes executing, <code>q</code> gets deleted but p still exists and uses the pointer. Once the function ends, <code>p</code> goes out of scope, and the shared_ptr is deleted since nothing uses the pointer anymore.</p>
<p><code>shared_ptr</code> work by maintaining a <strong>reference count</strong>.<br>On creation, it is incremented, and on deletion, it is decremented.<br>When it reached 0, the underlyinh object is deleted.</p>
<h3 id="Exception-Safty-Revisted-PImpl"><a href="#Exception-Safty-Revisted-PImpl" class="headerlink" title="Exception Safty Revisted, PImpl"></a>Exception Safty Revisted, PImpl</h3><p>Exception safety does not mean that a function never throw, or that it handles all exceptions internally.<br>If is about the guarentees we are given if we call a function and it throws an exception at us.</p>
<ol>
<li><strong>Basic Guarantee:</strong> If an exception is thrown from a fucntion a function <code>f</code>, then the program is in a valid but unspecified state. <code>Class</code> invariants are maintained , and there is no memory leaks or data corruption. But that is all that can be guaranteed. SOme data could’ve changed.</li>
<li><strong>Strong Guarantee:</strong> In an exception is thrown form f, then the program state is returned to before the suncrion call, Thus, it will be like the function was never called in the first place.</li>
<li><strong>NoThrown Guarantees:</strong> If we call f, then it will never throw an exception and it will always do it is job.</li>
</ol>
<h4 id="PImpl-Pointer-to-Implementation-idiom"><a href="#PImpl-Pointer-to-Implementation-idiom" class="headerlink" title="PImpl(Pointer to Implementation) idiom"></a><strong>PImpl(Pointer to Implementation) idiom</strong></h4><p>With this method, we can simply swap pointer at the end, which is guaranteed to never throw an exception</p>
<p>Example: Exception safty with PImpl</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">CImpl</span> &#123;</span><br><span class="line">    A a;</span><br><span class="line">    B b;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span> &#123;</span><br><span class="line">    unique_ptr&lt;CImpl&gt; pImpl;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">auto</span> temp = make_unique&lt;CImpl&gt; pImpl;</span><br><span class="line">        temp-&gt;a.<span class="built_in">g</span>();</span><br><span class="line">        temp-&gt;b.<span class="built_in">h</span>();</span><br><span class="line">        std::<span class="built_in">swap</span>(temp, PImpl);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>This implementation provides the strong guarantee.</p>
<h4 id="Vector-RAII"><a href="#Vector-RAII" class="headerlink" title="Vector - RAII:"></a>Vector - RAII:</h4><ul>
<li>vector<C> v - Represents ownership of C object, When the destructor runs for v when it goes out of scope, the C object are also deleted. Does not support polymorphism since any subclasses inserted into v will be sliced.</li>
<li>vector&lt;C*&gt; w - Represents non-ownership. When w goes out op scope, the destructor will not delet what is pointed to by C*. Supports polymorphism since we can put subclass pointers in the vector.</li>
<li>vector&lt;unique_ptr<C>&gt; u - When u goes out of scope, the destructor runs and frees memory. Indicared ownership and aallows polymorphsim.</li>
</ul>
<h4 id="Vector-and-Exception-Safety"><a href="#Vector-and-Exception-Safety" class="headerlink" title="Vector and Exception Safety:"></a>Vector and Exception Safety:</h4><p>vector<T>::emplace_back(…) - support the strong guarantee. If it throws, then the dynamically allocated array is unchanged.</p>
<p>Pseudocode steps to implement the code for emplace_back when the array is filled up and needs to double in size, with strong guarantee:</p>
<ul>
<li>Slow approach, but works everywhere:<ol>
<li>Allocate a new array with 2 times the current capacity.</li>
<li>Copy each object from the old array to the new array. If any of the copy constructoes throw an error, then delete the new array and rethrow.</li>
<li>Point the old array pointer to the new array.</li>
</ol>
</li>
<li>Faster approach, but requires T’s move constructor to procide the nothrow guaratee:<ol>
<li>Allocate a new array with 2 times the current capacity.</li>
<li>Use the move constructor to move each object to a new array.</li>
<li>Pointer the old array pointer to thr new array.</li>
</ol>
</li>
</ul>
<p>As briefly mentioned in the title, the second approach does not always provide the strong guaratee, since it any of the move constructors throws an error, then the original array has been modified since all the objects brfore the erraneous object have been moved over to the new array.</p>
<p>In the real emplace_back implementation, if it is guaranteed that the move constructor will never throw, then the compiler will move elements in the vector, Howevery, if this guarantee isn’t present the compiler will resize vector via copying</p>
<p>For the compiler to use the more optimal version of emplace_back, all moves and swaps must provide the nothrow guarantee, if we tag a function as noexcept, then the comiler will perform the optimizations</p>
<p>Example Using the noexcept tag</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">C</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="built_in">C</span>(C&amp;&amp; other) <span class="keyword">noexcept</span>;</span><br><span class="line">    C&amp; <span class="keyword">operator</span>=(C&amp;&amp; other) <span class="keyword">noexcept</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>What if noexcept function throw?</p>
<p>In C++, a function that is declared with noexcept is explicitly specified not to throw any exceptions. If a noexcept function does throw an exception, the program will immediately terminate by calling std::terminate().</p>
<h3 id="Casting"><a href="#Casting" class="headerlink" title="Casting"></a>Casting</h3><p>Casting is the process of converting a variable of one type to a differen type.</p>
<h4 id="static-cast"><a href="#static-cast" class="headerlink" title="static_cast"></a>static_cast</h4><p>Sensible casts with well definded semantics.<br>Ex float -&gt; int</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">float</span> f;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">g</span><span class="params">(<span class="type">int</span> x)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">g</span><span class="params">(<span class="type">float</span> f)</span></span>;</span><br><span class="line"><span class="built_in">g</span> (<span class="built_in">static</span>&lt;<span class="type">int</span>&gt;(f)); <span class="comment">// Calls the int version of g</span></span><br></pre></td></tr></table></figure>
<p>static_cast allows us to down cast: Superclass* -&gt; Subclass*</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Text</span> : <span class="keyword">public</span> Book;</span><br><span class="line"></span><br><span class="line">Book* pd = ...;</span><br><span class="line">Text* pt = <span class="built_in">static_cast</span>&lt;Text*&gt;(pd);</span><br></pre></td></tr></table></figure>
<p>Here, pd must pointer at a Text, otherwise there is undefined behaviour.<br>The compiler trust the client code to only run correct code.</p>
<p>It should be used when you are certain that the conversion is well-defined and doesn’t require runtime checks.</p>
<h4 id="const-cast"><a href="#const-cast" class="headerlink" title="const_cast"></a>const_cast</h4><p>Allow you tu remove const from a type.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">(<span class="type">int</span> *p)</span></span>; <span class="comment">// Assume f doesn&#x27;t modify whatever p points to</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">g</span><span class="params">(<span class="type">const</span> <span class="type">int</span> *p)</span> </span>&#123;</span><br><span class="line"> <span class="built_in">f</span>(p); <span class="comment">// Won&#x27;t compile</span></span><br><span class="line"> <span class="built_in">f</span>(<span class="built_in">const_cast</span>&lt;<span class="type">int</span> *&gt;(p)); <span class="comment">// Will compile</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>If f changes p, then we get undefined behaviour.</p>
<h4 id="dynamic-cast"><a href="#dynamic-cast" class="headerlink" title="dynamic_cast"></a>dynamic_cast</h4><p>Allows checking which subclass a superclass pointer is pointing to.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Book *bp = ...;</span><br><span class="line">Text *tp = <span class="built_in">dynamic_cast</span>&lt;Text *&gt;(bp);</span><br><span class="line"><span class="keyword">if</span> (tp) cout &lt;&lt; <span class="string">&quot;Text&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;Not Text&quot;</span> &lt;&lt; endl;</span><br></pre></td></tr></table></figure>
<p>If bp points at a Text, then tp will point at the same Text object.<br>Otherwise, tp is set to nullptr<br>A caveat is that dynamic_cast only works if you have at least one virtual method.</p>
<p>Casting shared_ptrs<br>We can also cast from shared_ptrs to other shared_ptrs.</p>
<p>The following functions are available in <memory>:</p>
<ul>
<li>static_pointer_cast</li>
<li>dynamic_pointer_cast</li>
<li>const_pointer_cast</li>
<li>reinterpret_pointer_cast</li>
</ul>
<p>We can also dynamic_cast references:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Book&amp; br = ...;</span><br><span class="line">Text&amp; tr = <span class="built_in">dynamic_cast</span>&lt;Text&amp;&gt;(br);</span><br></pre></td></tr></table></figure>

<h3 id="Polymorphic-Assignment-Problem-Revisted"><a href="#Polymorphic-Assignment-Problem-Revisted" class="headerlink" title="Polymorphic Assignment Problem Revisted"></a>Polymorphic Assignment Problem Revisted</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Text t1&#123;...&#125;, t2&#123;...&#125;;</span><br><span class="line">Book&amp; r1 = t1; Book&amp; r2 = t2;</span><br><span class="line">r1 = e2;</span><br></pre></td></tr></table></figure>
<p>if operator&#x3D; is non-virtual, we get partial assignment<br>if operator&#x3D; is virtual, we mixed assignment</p>
<p>Wcample: Polymorphic assignment with dynamic_cast</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Text&amp; Text::<span class="keyword">operator</span>=(<span class="type">const</span> Book&amp; other) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span> == &amp;other) <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">const</span> Text&amp; new_other = <span class="built_in">dynamic_cast</span>&lt;<span class="type">const</span> Text*&gt; (other);</span><br><span class="line">    Book::<span class="keyword">operator</span>=(new_other);</span><br><span class="line">    topic = new_other.topic;</span><br><span class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>If we provid anything that isn’t a Text into this operator, and exception is thrown and partial or mized assignment is avoided.</p>
<p>Is dynamic_cast good style?<br>With dynamic_cast, we can make decisions based on the runtime information of an object, For example:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// dynamic_pointer_cast is a safe and powerful tool for working with polymorphic types in C++ when you need to downcast std::shared_ptr. It ensures that your program does not attempt to treat a base class object as if it were a derived class object, preventing undefined behavior and potential crashes.</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">whatIsIt</span><span class="params">(shared_ptr&lt;Book&gt; b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">dynamic_pointer_cast</span>&lt;Text&gt;(b)) cout &lt;&lt; <span class="string">&quot;Text&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">dynamic_pointer_cast</span>&lt;Comic&gt;(b)) cout &lt;&lt; <span class="string">&quot;Comic&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;Regular Book&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This is very tightly coupled to the Book hierarchy. If a new subclass is added, then another else if statement<br>must be added to the function. Furthermore, this must be repeated everywhere where this loop is used. In case<br>any of them is missed, then there will be a bug.</p>
<p>In conclusion, whether dynamic_cast is good style or not depends entirely on it’s use. The use in operator&#x3D;<br>doesn’t need changing if we add more subclass types, and thus it is good style. However, the use in whatIsIt<br>needs to change whener the subclass structure changes and it is thus typically considered bad style. There is a<br>better way to implement whatIsIt, using virtual methods:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line"> ...</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line"> <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">identify</span><span class="params">()</span> </span>&#123; cout &lt;&lt; <span class="string">&quot;Book&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Text</span>: <span class="keyword">public</span> Book &#123;</span><br><span class="line"> ...</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line"> <span class="function"><span class="type">void</span> <span class="title">identify</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123; cout &lt;&lt; <span class="string">&quot;Text&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">WhatIsIt</span><span class="params">(Book *b)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">if</span> (b) b-&gt;<span class="built_in">identify</span>();</span><br><span class="line"> <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;Nothing&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>We can use this solution in the following cases:</p>
<ol>
<li>There are a large number of subclasses of Book and we want to identify all of them with eash.</li>
<li>Book and it’s subclasses have uniform interface, and the subclass behaviour doesn’t deviate too much</li>
</ol>
<p>Whenever we add a new subclass, we also only need to add one function (identify), and we don’t need to<br>change the client code.</p>
<h3 id="Template-functions"><a href="#Template-functions" class="headerlink" title="Template functions"></a>Template functions</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function">T <span class="title">functionName</span><span class="params">(T param)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Function implementation using the generic type T</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Template functions in C++ are a powerful tool for writing generic, type-safe, and reusable code. They allow you to define functions that work with any data type and let the compiler generate the appropriate function code based on the types used in your program. Understanding and using template functions effectively can greatly enhance the flexibility and maintainability of your C++ programs.</p>
<h3 id=""><a href="#" class="headerlink" title=""></a><algorithm></h3><p>#include <algorithm></p>
<ul>
<li>allows to use well mplemented algorithm</li>
<li>work with iterators</li>
</ul>
<h4 id="std-for-each"><a href="#std-for-each" class="headerlink" title="std::for_each"></a>std::for_each</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        v.<span class="built_in">emplace_back</span>(<span class="built_in">rand</span>() % <span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    std::for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), [](<span class="type">const</span> <span class="type">int</span>&amp; n)&#123;std::cout &lt;&lt; n &lt;&lt; <span class="string">&#x27; &#x27;</span>;&#125;);</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure>
<p>Requires:</p>
<ul>
<li>iterator implemented</li>
<li>unary function ONLY</li>
</ul>
<h4 id="std-find"><a href="#std-find" class="headerlink" title="std::find"></a>std::find</h4><p>return an iterator to the first occurrence of the element found, otherwise returns end iterator</p>
<p>template&lt;typename Iter, typename T&gt;<br>Iter find(Iter begin, Iter end, const T&amp; t);</p>
<p>Requires:</p>
<ul>
<li>iterator implemented</li>
<li>operator&#x3D;&#x3D; overloaded for compare function</li>
</ul>
<h4 id="std-count"><a href="#std-count" class="headerlink" title="std::count"></a>std::count</h4><p>return the number of occurrence of the element</p>
<p>template&lt;typename Iter, typename T&gt;<br>int count(Iter begin, Iter end, const T&amp; t);</p>
<p>Requires:</p>
<ul>
<li>iterator implemented</li>
<li>operator&#x3D;&#x3D; overloaded for compare function</li>
</ul>
<h4 id="std-copy"><a href="#std-copy" class="headerlink" title="std::copy"></a>std::copy</h4><p>copy all elements in range</p>
<p>template&lt;typename InputIter, typename OutputIter&gt;<br>void copy(InpuIter begin, InputIter end, OutputIter begin);</p>
<p>Requires:</p>
<ul>
<li>iterator implemented</li>
<li>copy can be performed</li>
<li>enough memory to perform copy</li>
</ul>
<h4 id="std-copy-if"><a href="#std-copy-if" class="headerlink" title="std::copy_if"></a>std::copy_if</h4><p>Template&lt;typename InputIter, typename OutputIter, typename UnaryFunction&gt;<br>copy_if(InputIter begin, InputIter end, OutputIter begin, UnaryFunction f);</p>
<h4 id="back-inserter"><a href="#back-inserter" class="headerlink" title="back_inserter()"></a>back_inserter()</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">copy</span>(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), <span class="built_in">back_inserter</span>(v2));</span><br><span class="line">    <span class="built_in">copy_if</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">back_inserter</span>(w), odd);</span><br><span class="line">    <span class="built_in">transform</span>(w.<span class="built_in">begin</span>(), w.<span class="built_in">end</span>(), <span class="built_in">back_insertr</span>(x), sqr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>back_inserter requires:</p>
<ul>
<li>push_back() is implemented for the container</li>
</ul>
<h4 id="std-transform"><a href="#std-transform" class="headerlink" title="std::transform"></a>std::transform</h4><p>performs an operation on every element in range and returns a new element</p>
<p>Template&lt;typename InputIter, typename OutputIter, typename UnaryFunction&gt;<br>void transfrom (inPutIter begin, InputIter end, OutputIter begin, UnaryFunction f);</p>
<p>Requires:</p>
<ul>
<li>iterator implemented</li>
<li>unary function for transform</li>
<li>enough memory for output container</li>
</ul>
<h3 id="function-object"><a href="#function-object" class="headerlink" title="function object"></a>function object</h3><p>Classes that implement&#x2F;override operator(), act as function calls</p>
<ul>
<li>alternative way of using lambda function</li>
<li>saves state for later use</li>
</ul>
<h3 id="lambdas"><a href="#lambdas" class="headerlink" title="lambdas"></a>lambdas</h3><ul>
<li>inline function which can be used for short snippets of code</li>
<li>Not worth naming (used for specific function and wont be re-used)</li>
</ul>
<p>syntax:<br>[] : list of captures (any existing objects or variables you need)<br>() : list of arguments for the function<br>{} : function body</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">List l;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">    l.<span class="built_in">addFront</span>(<span class="number">1</span> * <span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">doSomething</span>(l.<span class="built_in">begin</span>(), l.<span class="built_in">end</span>(), [](<span class="type">const</span> <span class="type">int</span>&amp; n)&#123;std::cout&lt;&lt;n+<span class="number">5</span>&lt;&lt;std::endl;&#125;)</span><br></pre></td></tr></table></figure>

<p>captures [ ]: let lambda obtain access to variables that are currently in scope<br>[n]</p>
<ul>
<li>variable n is captured by value</li>
<li>n is read-only inside lambda function</li>
</ul>
<p>capture allows:</p>
<ul>
<li>captrue by value</li>
<li>captrue by reference</li>
</ul>
<p>capture syntax:<br>[&#x3D;] : capture all external variables by value<br>[&amp;] : capture all ecternal variables by reference<br>[x, &amp;y] : capture x, by value, capture y by reference</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="http://Xuan0ling.github.io">xuan pan</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://xuan0ling.github.io/2024/04/26/cs246_final/">http://xuan0ling.github.io/2024/04/26/cs246_final/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://images3.alphacoders.com/129/1298880.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/04/26/cs246_savvy/" title="CS246_savvy"><img class="cover" src="https://images3.alphacoders.com/129/1298880.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">CS246_savvy</div></div></a></div><div class="next-post pull-right"><a href="/2024/04/17/CS/" title="资源"><img class="cover" src="https://images3.alphacoders.com/129/1298880.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">资源</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/./img/pf.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">xuan pan</div><div class="author-info__description">undergraduate student from university of waterloo</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xuan0ling"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:xuanling1221@outlook.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://twitter.com/naux31844403" target="_blank" title="Twitter"><i class="fa-brands fa-twitter"></i></a><a class="social-icon" href="https://www.linkedin.com/in/xuan-pan-84b91b2a3/" target="_blank" title="Linkedin"><i class="fa-brands fa-linkedin"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#CS246-Final-Reveiw"><span class="toc-number">1.</span> <span class="toc-text">CS246 Final Reveiw</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Design-Patterns"><span class="toc-number">1.1.</span> <span class="toc-text">Design Patterns</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Iterator-Pattern"><span class="toc-number">1.1.1.</span> <span class="toc-text">Iterator Pattern</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Decorator-Pattern"><span class="toc-number">1.1.2.</span> <span class="toc-text">Decorator Pattern</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Observer-Pattern"><span class="toc-number">1.1.3.</span> <span class="toc-text">Observer Pattern</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Factory-Method-Pattern-Virtual-constructor-pattern"><span class="toc-number">1.1.4.</span> <span class="toc-text">Factory Method Pattern (Virtual constructor pattern)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Template-Method-Pattern-Non-Virtual-Idiom"><span class="toc-number">1.1.5.</span> <span class="toc-text">Template Method Pattern (Non-Virtual Idiom)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Advanced-C-Features"><span class="toc-number">1.2.</span> <span class="toc-text">Advanced C++ Features</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#STL-Maps"><span class="toc-number">1.2.1.</span> <span class="toc-text">STL Maps</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Structured-binding"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">Structured binding</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Coupling-x2F-Cohesion"><span class="toc-number">1.2.2.</span> <span class="toc-text">Coupling&#x2F;Cohesion</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Single-Responsibility-Principle"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">Single Responsibility Principle:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Model-View-Controller-MVC"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">Model View Controller (MVC)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Exception-Safety"><span class="toc-number">1.2.3.</span> <span class="toc-text">Exception Safety</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Reaource-Acquisition-is-Initializtion-RAII"><span class="toc-number">1.2.4.</span> <span class="toc-text">Reaource Acquisition is Initializtion (RAII)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#unique-pointer"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">unique pointer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#shared-pointer"><span class="toc-number">1.2.4.2.</span> <span class="toc-text">shared pointer</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Exception-Safty-Revisted-PImpl"><span class="toc-number">1.2.5.</span> <span class="toc-text">Exception Safty Revisted, PImpl</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#PImpl-Pointer-to-Implementation-idiom"><span class="toc-number">1.2.5.1.</span> <span class="toc-text">PImpl(Pointer to Implementation) idiom</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Vector-RAII"><span class="toc-number">1.2.5.2.</span> <span class="toc-text">Vector - RAII:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Vector-and-Exception-Safety"><span class="toc-number">1.2.5.3.</span> <span class="toc-text">Vector and Exception Safety:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Casting"><span class="toc-number">1.2.6.</span> <span class="toc-text">Casting</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#static-cast"><span class="toc-number">1.2.6.1.</span> <span class="toc-text">static_cast</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#const-cast"><span class="toc-number">1.2.6.2.</span> <span class="toc-text">const_cast</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#dynamic-cast"><span class="toc-number">1.2.6.3.</span> <span class="toc-text">dynamic_cast</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Polymorphic-Assignment-Problem-Revisted"><span class="toc-number">1.2.7.</span> <span class="toc-text">Polymorphic Assignment Problem Revisted</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Template-functions"><span class="toc-number">1.2.8.</span> <span class="toc-text">Template functions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.2.9.</span> <span class="toc-text"></span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#std-for-each"><span class="toc-number">1.2.9.1.</span> <span class="toc-text">std::for_each</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#std-find"><span class="toc-number">1.2.9.2.</span> <span class="toc-text">std::find</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#std-count"><span class="toc-number">1.2.9.3.</span> <span class="toc-text">std::count</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#std-copy"><span class="toc-number">1.2.9.4.</span> <span class="toc-text">std::copy</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#std-copy-if"><span class="toc-number">1.2.9.5.</span> <span class="toc-text">std::copy_if</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#back-inserter"><span class="toc-number">1.2.9.6.</span> <span class="toc-text">back_inserter()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#std-transform"><span class="toc-number">1.2.9.7.</span> <span class="toc-text">std::transform</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#function-object"><span class="toc-number">1.2.10.</span> <span class="toc-text">function object</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lambdas"><span class="toc-number">1.2.11.</span> <span class="toc-text">lambdas</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/04/26/cs246/" title="CS246"><img src="https://images3.alphacoders.com/129/1298880.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CS246"/></a><div class="content"><a class="title" href="/2024/04/26/cs246/" title="CS246">CS246</a><time datetime="2024-04-26T19:05:00.000Z" title="Created 2024-04-26 14:05:00">2024-04-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/04/26/cs246_savvy/" title="CS246_savvy"><img src="https://images3.alphacoders.com/129/1298880.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CS246_savvy"/></a><div class="content"><a class="title" href="/2024/04/26/cs246_savvy/" title="CS246_savvy">CS246_savvy</a><time datetime="2024-04-26T19:05:00.000Z" title="Created 2024-04-26 14:05:00">2024-04-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/04/26/cs246_final/" title="CS246"><img src="https://images3.alphacoders.com/129/1298880.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CS246"/></a><div class="content"><a class="title" href="/2024/04/26/cs246_final/" title="CS246">CS246</a><time datetime="2024-04-26T19:05:00.000Z" title="Created 2024-04-26 14:05:00">2024-04-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/04/17/CS/" title="资源"><img src="https://images3.alphacoders.com/129/1298880.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="资源"/></a><div class="content"><a class="title" href="/2024/04/17/CS/" title="资源">资源</a><time datetime="2024-04-17T21:09:00.000Z" title="Created 2024-04-17 16:09:00">2024-04-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/04/17/IBM_into_data/" title="IBM Data Science Professional Certificate"><img src="https://images3.alphacoders.com/129/1298880.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="IBM Data Science Professional Certificate"/></a><div class="content"><a class="title" href="/2024/04/17/IBM_into_data/" title="IBM Data Science Professional Certificate">IBM Data Science Professional Certificate</a><time datetime="2024-04-17T21:09:00.000Z" title="Created 2024-04-17 16:09:00">2024-04-17</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By xuan pan</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>